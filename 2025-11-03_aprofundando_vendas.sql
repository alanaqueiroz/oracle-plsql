-- DROPS
DROP TABLE CLIENTE_ENDERECO  CASCADE CONSTRAINTS;
DROP TABLE PESSOA_JURIDICA   CASCADE CONSTRAINTS;
DROP TABLE PESSOA_FISICA     CASCADE CONSTRAINTS;
DROP TABLE TIPO_ENDERECO     CASCADE CONSTRAINTS;
DROP TABLE CLIENTE           CASCADE CONSTRAINTS;
DROP TABLE CIDADE            CASCADE CONSTRAINTS;
DROP TABLE ESTADO            CASCADE CONSTRAINTS;

-- CREATE TABLES
CREATE TABLE CLIENTE(
   ID_CLIENTE NUMBER(10) PRIMARY KEY,
   NOME VARCHAR2(120) NOT NULL,
   EMAIL VARCHAR2(120) NOT NULL,
   SENHA VARCHAR2(512) NOT NULL,
   TELEFONE VARCHAR2(14),
   MOVEL VARCHAR2(15),
   TIPO CHAR(1) NOT NULL,
   CONSTRAINT UQ_EMAIL_CLIENTE UNIQUE (EMAIL),
   CONSTRAINT CK_TIPO_CLIENTE CHECK (TIPO IN ('F', 'J'))
);

CREATE TABLE ESTADO (
   SIGLA CHAR(2) PRIMARY KEY,
   NOME VARCHAR2(120) NOT NULL,
   CONSTRAINT UQ_NOME_ESTADO UNIQUE (NOME)
);

CREATE TABLE CIDADE (
   ID_CIDADE NUMBER(10) PRIMARY KEY,
   NOME VARCHAR2(120) NOT NULL,
   SIGLA CHAR(2) NOT NULL,
   COD_IBGE NUMBER(7),
   POPULACAO NUMBER(10),
   CONSTRAINT FK_CIDADE_ESTADO FOREIGN KEY (SIGLA)
      REFERENCES ESTADO (SIGLA)
);

CREATE TABLE TIPO_ENDERECO(
   ID_TIPOENDERECO NUMBER(1) PRIMARY KEY, 
   NOME VARCHAR2(120) NOT NULL,
   CONSTRAINT UQ_NOME_TIPOEND UNIQUE (NOME)
);

CREATE TABLE PESSOA_FISICA(
   ID_CLIENTE NUMBER(10) PRIMARY KEY,
   NOME VARCHAR2(120) NOT NULL,
   CPF CHAR(14) NOT NULL,
   GENERO CHAR(1) NOT NULL,
   DATA_NASCIMENTO DATE NOT NULL,
   CONSTRAINT CK_GENERO_PF CHECK (GENERO IN ('M','F')),
   CONSTRAINT FK_CLIENTE_PESSOAFISICA FOREIGN KEY (ID_CLIENTE)
      REFERENCES CLIENTE (ID_CLIENTE)
);

CREATE TABLE PESSOA_JURIDICA(
   ID_CLIENTE NUMBER(10) PRIMARY KEY,
   RAZAO_SOCIAL VARCHAR2(120) NOT NULL,
   NOME_FANTASIA VARCHAR2(120),
   CNPJ CHAR(18) NOT NULL,
   INSCRICAO_ESTADUAL CHAR(12),
   CONSTRAINT FK_CLIENTE_PESSOAJURIDICA FOREIGN KEY (ID_CLIENTE)
      REFERENCES CLIENTE (ID_CLIENTE)
);

CREATE TABLE CLIENTE_ENDERECO(
   ID_CLIENTE NUMBER(10),
   ID_TIPOENDERECO NUMBER(2),
   LOGRADOURO VARCHAR2(120) NOT NULL,
   NUMERO VARCHAR2(10),
   COMPLEMENTO VARCHAR2(60),
   BAIRRO VARCHAR2(60),
   CIDADE VARCHAR2(80) NOT NULL,
   UF CHAR(2) NOT NULL,
   CEP CHAR(8) NOT NULL,
   CONSTRAINT PK_CLIENTEENDERECO PRIMARY KEY (ID_CLIENTE, ID_TIPOENDERECO),
   CONSTRAINT FK_TIPOEND_CLIEND FOREIGN KEY (ID_TIPOENDERECO)
      REFERENCES TIPO_ENDERECO (ID_TIPOENDERECO),
   CONSTRAINT FK_CLIENTE_CLIEND FOREIGN KEY (ID_CLIENTE)
      REFERENCES CLIENTE (ID_CLIENTE)
);

-- INSERTS ESTADO
INSERT INTO ESTADO VALUES ('SP','São Paulo');
INSERT INTO ESTADO VALUES ('RJ','Rio de Janeiro');
INSERT INTO ESTADO VALUES ('MG','Minas Gerais');
INSERT INTO ESTADO VALUES ('BA','Bahia');
INSERT INTO ESTADO VALUES ('PR','Paraná');

-- INSERTS CIDADE
INSERT INTO CIDADE VALUES (1,'São Paulo','SP',3550308,12330000);
INSERT INTO CIDADE VALUES (2,'Rio de Janeiro','RJ',3304557,6775561);
INSERT INTO CIDADE VALUES (3,'Belo Horizonte','MG',3106200,2523000);
INSERT INTO CIDADE VALUES (4,'Curitiba','PR',4106902,1933000);
INSERT INTO CIDADE VALUES (5,'Salvador','BA',2927408,2887000);

-- INSERTS TIPO_ENDERECO
INSERT INTO TIPO_ENDERECO VALUES (1,'Endereço de Cobrança');
INSERT INTO TIPO_ENDERECO VALUES (2,'Endereço de Entrega');
INSERT INTO TIPO_ENDERECO VALUES (3,'Endereço Comercial');
INSERT INTO TIPO_ENDERECO VALUES (4,'Endereço Residencial');
INSERT INTO TIPO_ENDERECO VALUES (5,'Endereço Alternativo');

-- INSERTS CLIENTE
INSERT INTO CLIENTE VALUES (1,'João da Silva','joao@email.com','senha1','1133445566',NULL,'F');
INSERT INTO CLIENTE VALUES (2,'Maria Oliveira','maria@email.com','senha2',NULL,'11988776655','F');
INSERT INTO CLIENTE VALUES (3,'Carlos Alberto','carlos@email.com','senha3','2144557788',NULL,'F');
INSERT INTO CLIENTE VALUES (4,'XPTO Ltda','contato@xpto.com','senha4','1133001122',NULL,'J');
INSERT INTO CLIENTE VALUES (5,'Tech Solutions SA','contato@tech.com','senha5',NULL,'11997766554','J');

-- INSERTS PESSOA_FISICA
INSERT INTO PESSOA_FISICA VALUES (1,'João da Silva','123.456.789-00','M',DATE '1985-04-10');
INSERT INTO PESSOA_FISICA VALUES (2,'Maria Oliveira','987.654.321-11','F',DATE '1990-08-22');
INSERT INTO PESSOA_FISICA VALUES (3,'Carlos Alberto','111.222.333-44','M',DATE '1975-12-05');
INSERT INTO PESSOA_FISICA VALUES (6,'Fernanda Costa','555.666.777-88','F',DATE '1988-06-15');
INSERT INTO PESSOA_FISICA VALUES (7,'Ricardo Souza','999.888.777-66','M',DATE '1995-02-03');

-- INSERTS PESSOA_JURIDICA
INSERT INTO PESSOA_JURIDICA VALUES (4,'XPTO Comércio Ltda','XPTO','12.345.678/0001-99','123456789012');
INSERT INTO PESSOA_JURIDICA VALUES (5,'Tech Solutions SA','TechSol','98.765.432/0001-55',NULL);
INSERT INTO PESSOA_JURIDICA VALUES (8,'Mega Vendas ME','Mega','11.111.111/0001-11','112233445566');
INSERT INTO PESSOA_JURIDICA VALUES (9,'Brasil Export Ltda','BExport','22.222.222/0001-22',NULL);
INSERT INTO PESSOA_JURIDICA VALUES (10,'Grupo Alpha SA','Alpha','33.333.333/0001-33','998877665544');

-- INSERTS CLIENTE_ENDERECO
INSERT INTO CLIENTE_ENDERECO VALUES (1,1,'Rua A','100',NULL,'Centro','São Paulo','SP','01001000');
INSERT INTO CLIENTE_ENDERECO VALUES (1,2,'Rua B','200','Apto 12','Bela Vista','São Paulo','SP','01002000');
INSERT INTO CLIENTE_ENDERECO VALUES (2,1,'Av. Atlântica','1500',NULL,'Copacabana','Rio de Janeiro','RJ','22021001');
INSERT INTO CLIENTE_ENDERECO VALUES (3,2,'Rua das Flores','300',NULL,'Centro','Curitiba','PR','80010000');
INSERT INTO CLIENTE_ENDERECO VALUES (4,3,'Av. Brasil','500','Sala 10','Comercial','Belo Horizonte','MG','30140000');

COMMIT;